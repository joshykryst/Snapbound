<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>SnapBound | Photo Booth</title>
    <link rel="stylesheet" href="picture.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <meta name="permissions-policy" content="camera=*">
</head>
<body class="booth-page">
    <!-- Navigation -->
    <nav class="nav-bar">
        <div class="nav-container">
            <a href="index.html" class="logo">
                <img src="S.png" alt="Logo" class="logo-img">
                <span class="logo-text">Snap<span class="logo-highlight">Bound</span></span>
            </a>
            <div class="nav-links">
                <a href="index.html#home" class="nav-link"><i class="fas fa-home"></i> Home</a>
                <a href="index.html#features" class="nav-link"><i class="fas fa-camera-retro"></i> Features</a>
                <a href="index.html#how-it-works" class="nav-link"><i class="fas fa-question-circle"></i> How It Works</a>
                <a href="index.html#about" class="nav-link"><i class="fas fa-info-circle"></i> About</a>
            </div>
            <div class="mobile-menu-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <div class="booth-container">
        <h1 class="booth-title">Capture Your <span class="highlight">Moments</span></h1>
        
        <div class="timer-panel">
            <div class="panel-label"><i class="fas fa-stopwatch"></i> Choose Timer</div>
            <div class="timer-controls">
                <button class="timer-btn active" data-seconds="0">No Timer</button>
                <button class="timer-btn" data-seconds="3">3s</button>
                <button class="timer-btn" data-seconds="5">5s</button>
                <button class="timer-btn" data-seconds="8">8s</button>
            </div>
        </div>
        
        <div class="shots-counter" id="shotsCounter">
            <i class="fas fa-camera"></i> <span>10 shots left</span>
        </div>
        
        <div class="booth-layout">
            <div class="booth-left">
                <div class="camera-section">
                    <video id="webcam" autoplay playsinline></video>
                    <div class="countdown" id="countdown"></div>
                    <canvas id="canvas" style="display:none;"></canvas>
                    <div class="camera-overlay">
                        <div class="overlay-corner top-left"></div>
                        <div class="overlay-corner top-right"></div>
                        <div class="overlay-corner bottom-left"></div>
                        <div class="overlay-corner bottom-right"></div>
                    </div>
                </div>
            </div>
            
            <div class="gallery-section" id="gallery">
                <!-- Captured images will appear here -->
                <div class="gallery-header">
                    <h3><i class="fas fa-images"></i> Your Photos</h3>
                </div>
                <div class="gallery-empty-state">
                    <i class="fas fa-camera-retro"></i>
                    <p>Captured photos will appear here</p>
                </div>
            </div>
        </div>
        
        <!-- Moved control buttons outside booth-layout for better positioning -->
        <div class="control-buttons">
            <button id="captureBtn" class="capture-btn"><i class="fas fa-camera"></i> Take Picture</button>
            <div style="position: relative;">
                <button id="createStrip" class="btn">
                    <i class="fas fa-images"></i> Create PhotoStrip
                    <span class="photo-requirement">4</span>
                </button>
            </div>
            <button id="resetBtn" class="btn reset-btn"><i class="fas fa-trash"></i> Reset Photos</button>
        </div>
        
        <div class="gallery-hint">
            <i class="fas fa-arrow-down"></i> Scroll to view captured photos
        </div>

        <!-- Add this button near your timer controls -->
        <div class="camera-controls">
            <button id="switchCamera" class="control-btn">
                <i class="fas fa-sync"></i> Switch Camera
            </button>
        </div>
    </div>

    <!-- Modal for photo preview -->
    <div class="photo-modal" id="photoModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <img id="modalImage" src="" alt="Preview">
            <div class="modal-actions">
                <button class="modal-btn" id="downloadBtn"><i class="fas fa-download"></i> Download</button>
                <button class="modal-btn" id="shareBtn"><i class="fas fa-share-alt"></i> Share</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="booth-footer">
        <div class="copyright">
            <p>&copy; 2025 SnapBound PhotoBooth. All rights reserved.</p>
        </div>
    </footer>

    <script src="picture.js"></script>
    <script src="index.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get reference to the createStrip button
            const createStripBtn = document.getElementById('createStrip');
            
            if (createStripBtn) {
                // Set the click handler (no need to prevent default since we removed the inline handler)
                createStripBtn.addEventListener('click', function() {
                    // Check if we have enough photos
                    const capturedImages = JSON.parse(localStorage.getItem('capturedImages')) || [];
                    
                    if (capturedImages.length < 4) {
                        // Show error message
                        alert('Please capture at least 4 photos before creating a photo strip!');
                        return;
                    }
                    
                    // Explicitly set the correct path
                    window.location.href = '../selectphotos/index.html';
                });
            }
        });
    </script>
</body>
</html>